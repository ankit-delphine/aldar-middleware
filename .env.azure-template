# ============================================
# AIQ BACKEND - AZURE MONITORING TEMPLATE
# ============================================
# Copy this file to .env and fill in your Azure resource details
# This template includes all settings needed for Azure Managed Prometheus & Grafana

# ============================================
# APPLICATION SETTINGS
# ============================================
ALDAR_ENVIRONMENT=production
ALDAR_DEBUG=false
ALDAR_LOG_LEVEL=INFO
ALDAR_APP_NAME=AIDAR Backend
ALDAR_APP_VERSION=0.1.0

# ============================================
# SERVER SETTINGS
# ============================================
ALDAR_HOST=0.0.0.0
ALDAR_PORT=8000

# ============================================
# DATABASE CONFIGURATION (Azure PostgreSQL)
# ============================================
ALDAR_DB_HOST=your-db.postgres.database.azure.com
ALDAR_DB_PORT=5432
ALDAR_DB_USER=your-db-user
ALDAR_DB_PASS=your-db-password
ALDAR_DB_BASE=your-database-name

# ============================================
# REDIS CONFIGURATION
# ============================================
# Option 1: Azure Cache for Redis
ALDAR_REDIS_HOST=your-redis.redis.cache.windows.net
ALDAR_REDIS_PORT=6379
ALDAR_REDIS_PASSWORD=your-redis-password
ALDAR_REDIS_DB=0

# Option 2: Azure Service Bus (for Celery broker)
# Uncomment if using Service Bus instead of Redis
# ALDAR_CELERY_BROKER_URL=azureservicebus://your-connection-string
# ALDAR_CELERY_RESULT_BACKEND=redis://your-redis-connection

# ============================================
# CELERY CONFIGURATION
# ============================================
ALDAR_CELERY_BROKER_URL=redis://your-redis.redis.cache.windows.net:6379/0
ALDAR_CELERY_RESULT_BACKEND=redis://your-redis.redis.cache.windows.net:6379/0

# ============================================
# AZURE AD OAUTH2
# ============================================
ALDAR_AZURE_TENANT_ID=your-tenant-id
ALDAR_AZURE_CLIENT_ID=your-client-id
ALDAR_AZURE_CLIENT_SECRET=your-client-secret
ALDAR_AZURE_AUTHORITY=https://login.microsoftonline.com/your-tenant-id

# ============================================
# JWT AUTHENTICATION
# ============================================
ALDAR_JWT_SECRET_KEY=your-secure-random-secret-key-change-this
ALDAR_JWT_ALGORITHM=HS256
ALDAR_JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30

# ============================================
# OPENAI CONFIGURATION
# ============================================
ALDAR_OPENAI_API_KEY=sk-your-openai-api-key
ALDAR_OPENAI_MODEL=gpt-4

# ============================================
# LOCAL MONITORING (for development)
# ============================================
ALDAR_PROMETHEUS_ENABLED=false
ALDAR_PROMETHEUS_PORT=9090
ALDAR_GRAFANA_ENABLED=false
ALDAR_GRAFANA_PORT=3000

# ============================================
# AZURE MANAGED PROMETHEUS CONFIGURATION
# ============================================
ALDAR_AZURE_PROMETHEUS_ENABLED=true
# Get this from: az monitor prometheus show --resource-group <rg> --name <prometheus-name> --query id -o tsv
ALDAR_AZURE_PROMETHEUS_ENDPOINT=https://your-workspace-id.prometheus.monitor.azure.com
# Workspace ID from your Azure Prometheus resource
ALDAR_AZURE_PROMETHEUS_WORKSPACE_ID=your-workspace-id

# ============================================
# AZURE MANAGED GRAFANA CONFIGURATION
# ============================================
ALDAR_AZURE_GRAFANA_ENABLED=true
# Get this from: az grafana show --resource-group <rg> --name <grafana-name> --query properties.endpoint
ALDAR_AZURE_GRAFANA_ENDPOINT=https://your-grafana.grafana.azure.com
# Generate in Grafana: Administration → API Keys → New API Key
ALDAR_AZURE_GRAFANA_API_KEY=eyJ...your-api-key...

# ============================================
# AZURE APPLICATION INSIGHTS
# ============================================
ALDAR_APP_INSIGHTS_ENABLED=true
# Format: InstrumentationKey=your-key;IngestionEndpoint=https://your-region.in.applicationinsights.azure.com/
ALDAR_APP_INSIGHTS_CONNECTION_STRING=InstrumentationKey=your-instrumentation-key;IngestionEndpoint=https://eastus-0.in.applicationinsights.azure.com/

# ============================================
# WEBSOCKET CONFIGURATION
# ============================================
ALDAR_WEBSOCKET_HEARTBEAT_INTERVAL=30
ALDAR_WEBSOCKET_MAX_CONNECTIONS=1000

# ============================================
# CORS CONFIGURATION
# ============================================
ALDAR_CORS_ORIGINS=https://your-frontend-domain.com,https://another-domain.com
ALDAR_CORS_ALLOW_CREDENTIALS=true

# ============================================
# RATE LIMITING
# ============================================
ALDAR_RATE_LIMIT_REQUESTS=1000
ALDAR_RATE_LIMIT_WINDOW=60

# ============================================
# CHAT CONFIGURATION
# ============================================
ALDAR_MAX_CHAT_HISTORY=100
ALDAR_CHAT_TIMEOUT=300

# ============================================
# AZURE SERVICE BUS (Optional - for advanced messaging)
# ============================================
ALDAR_SERVICE_BUS_CONNECTION_STRING=Endpoint=sb://your-namespace.servicebus.windows.net/;SharedAccessKeyName=RootManageSharedAccessKey;SharedAccessKey=your-key
ALDAR_SERVICE_BUS_QUEUE_NAME=aiq-queue

# ============================================
# AZURE STORAGE (Optional - for file storage)
# ============================================
ALDAR_AZURE_STORAGE_CONNECTION_STRING=DefaultEndpointsProtocol=https;AccountName=your-account;AccountKey=your-key;EndpointSuffix=core.windows.net
ALDAR_AZURE_STORAGE_CONTAINER_NAME=aiq-storage

# ============================================
# MCP CONFIGURATION (Optional)
# ============================================
ALDAR_MCP_SERVER_URL=https://your-mcp-server.com
ALDAR_MCP_API_KEY=your-mcp-api-key

# ============================================
# SENTRY ERROR TRACKING (Optional)
# ============================================
ALDAR_SENTRY_DSN=https://your-key@sentry.io/your-project-id
ALDAR_SENTRY_SAMPLE_RATE=1.0

# ============================================
# COSMOS DB APPLICATION DATA STORAGE
# ============================================
ALDAR_COSMOS_ENDPOINT=https://your-account.documents.azure.com:443/
ALDAR_COSMOS_KEY=your-cosmos-db-key
ALDAR_COSMOS_DATABASE_NAME=aiq_memory
ALDAR_COSMOS_CONTAINER_NAME=conversations
ALDAR_COSMOS_CONSISTENCY_LEVEL=Session

# ============================================
# COSMOS DB LOGGING (Centralized Request/Response Tracking)
# ============================================
# Enable this to send all application logs and request/response data to Cosmos DB
ALDAR_COSMOS_LOGGING_ENABLED=true
ALDAR_COSMOS_LOGGING_DATABASE_NAME=aiq-database
ALDAR_COSMOS_LOGGING_CONTAINER_NAME=aiq-log
# Partition key is /id - each log entry gets a unique ID
ALDAR_COSMOS_LOGGING_THROUGHPUT=400
# Batch size for efficient writes - logs are buffered and sent in batches
ALDAR_COSMOS_LOGGING_BATCH_SIZE=50
# Flush interval in seconds - logs are sent even if batch not full
ALDAR_COSMOS_LOGGING_FLUSH_INTERVAL=5

# ============================================
# QUERY PROCESSING CONFIGURATION
# ============================================
ALDAR_QUERY_CACHE_TTL=3600
ALDAR_SESSION_CACHE_TTL=86400
ALDAR_MAX_CONTEXT_MESSAGES=50
ALDAR_ENABLE_LONG_TERM_MEMORY=true